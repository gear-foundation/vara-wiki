---
title: Manual Relay Guide
sidebar_position: 6
sidebar_label: Manual Relay Guide
---

# Manual Message Bridging

This guide describes how to manually push a message across the bridge between Vara test network and Ethereum test network (Hoodi) if the **Relayer is unavailable**.  
All steps are illustrated for `USDT` tokens and can be adapted for similar scenarios.

:::note
If the Relayer is unavailable, any bridging message remains stored on-chain and can be relayed manually at any time. 
No message is lost; manual relay simply finalizes the process and completes delivery.
:::

:::important
Always verify all contract addresses before bridging.

Addresses in this guide are for current test deployments and may change with network updates.

For the latest and most accurate contract addresses, see: [Vara Bridge Developer Hub – Contract Addresses](https://wiki.vara.network/docs/bridge/developer_hub)

**Do not use addresses from this guide without cross-checking their relevance.**
:::

## Bridging Ethereum → Vara

### 1. Approve Token Transfer

![Approve USDT for Bridging](./img/approve.png)

- **Open** the [test USDT contract on Hoodi Etherscan](https://hoodi.etherscan.io/address/0xbc24436a5AF9b58431F6385703C15FdA8c60d1f5).
- Go to **Contract → Write Contract** tab.
- Click **Connect to Web3** and select a wallet with sender’s account.
- Use the `approve` method:
  - **spender:** `0xCc1C2f83b40f1FAb06753Ea4e4119EB2083a5EFe` (Erc20Manager address on Hoodi)
  - **value:** Amount to transfer (USDT uses 6 decimals, so `1 USDT = 1_000_000`, `5 USDT = 5_000_000`)


### 2. Initiate Bridging

![Request Bridging](./img/request-bridging.png)

- **Open** [Erc20Manager contract on Hoodi Etherscan](https://hoodi.etherscan.io/address/0xCc1C2f83b40f1FAb06753Ea4e4119EB2083a5EFe#writeProxyContract).
- Go to **Contract → Write as Proxy**.
- Connect wallet if needed.
- Use the `requestBridging` method:
  - **token:** `0xbc24436a5AF9b58431F6385703C15FdA8c60d1f5` (USDT address)
  - **amount:** Same as above or less (≤ approved amount)
  - **to:** Recipient address on Vara (hex string, e.g., convert from SS58 on [ss58.org](https://ss58.org))
- **Send** the transaction.

At this point, Erc20Manager emits a `BridgingRequested` event.

### 3 Relay Event Data to Vara

The final step is to relay proof of the bridging event from Ethereum to the Vara network. This means providing evidence that the required Ethereum block was finalized and that a transaction containing the relevant event (`BridgingRequested`) was actually included and executed on-chain.

![Event hash USDT for Bridging](./img/event_hash.png)

To do this:

- **Find the transaction hash** that emitted the `BridgingRequested` event.
- This is visible in the event list after submitting the bridging transaction.
- This hash serves as the unique reference to the on-chain proof and will be used by the relayer to gather and submit all necessary data from Ethereum to Vara.

Next, run the Gear Bridge Relayer Docker container, providing it with the transaction hash and other required parameters.

```sh
docker pull ghcr.io/gear-tech/bridge-relayer:latest
```

> Latest Docker images for the Gear Bridge Relayer are published at:  
> [https://github.com/gear-tech/gear-bridges/pkgs/container/bridge-relayer](https://github.com/gear-tech/gear-bridges/pkgs/container/bridge-relayer)

```sh
docker run --rm ghcr.io/gear-tech/bridge-relayer:latest eth-gear-manual \
  --tx-hash 0x982430607dab916eb86e0c78afc4347803736fd0ac4591c3ffd507e61344f272 \
  --checkpoint-light-client 0xdb7bbcaff8caa131a94d73f63c8f0dd1fec60e0d263e551d138a9dfb500134ca \
  --historical-proxy 0x5d2a0dcfc30301ad5eda002481e6d0b283f81a1221bef8ba2a3fa65fd56c8e0f \
  --receiver-program 0xa1497efdb24b1f08a5801b1c59610c389a5341b4db7367a7ec70fa6f9b9a2a1c \
  --ethereum-rpc wss://hoodi-reth-rpc.gear-tech.io/ws \
  --ethereum-beacon-rpc https://hoodi-nimbus-rpc.gear-tech.io \
  --gear-domain wss://testnet.vara.network \
  --gear-port 443 \
  --gear-suri <SURI>
```

- Replace `<SURI>` with the Substrate account URI that pays for Vara network fees.

:::note
**After submitting the proof, the finalization (rewarding) process is not instant.**  
You must first wait until the light client on Vara includes the required Ethereum block (usually about 15–20 minutes after the bridging transaction is mined).  
Only after this synchronization can the proof be submitted and verified on-chain.

Once the cross-chain proof is accepted, the transferred tokens will appear on Vara.
:::

To confirm the result, check the state of the **wrapped USDT token program** on Vara using the `balanceOf` function.  
This can be done on [IDEA](https://idea.gear-tech.io/programs/0x7288022b85e4e7563e4f3d3ae7f443477f8ce1342d204484a28818949e0371cd?node=wss%3A%2F%2Ftestnet-archive.vara.network):  
- Click "Read state"
- Select `balanceOf`
- Enter the recipient address

The updated balance will reflect the received tokens after successful bridging.


## Bridging Vara → Ethereum

The bridging procedure from Vara to Ethereum is **very similar** to the reverse direction described above.  

The user interacts with the **VftManager program** on Vara. The bridging flow consists of the following main steps:

### 0. (Optional) Tokenize TVARA to VFT

If your tokens are not yet tokenized as VFT (Vara Fungible Tokens), you need to convert your TVARA using the `VftNativeExchange::Mint` message.  
This will mint the desired amount of VFT in [TVARA token program](https://idea.gear-tech.io/programs/0x47cd3c611f9412f936dc60430b574b048cd211bdfac8259e2ad5af735b6059b4?node=wss%3A%2F%2Ftestnet-archive.vara.network)

### 1. Approve VftManager to Spend Tokens

![Approve TVARA](./img/vara-approve.png)

- Open the VFT token contract, e.g., [TVARA token program](https://idea.gear-tech.io/programs/0x47cd3c611f9412f936dc60430b574b048cd211bdfac8259e2ad5af735b6059b4?node=wss%3A%2F%2Ftestnet-archive.vara.network).
- Use the `approve` function:
  - **spender:** `0xa1497efdb24b1f08a5801b1c59610c389a5341b4db7367a7ec70fa6f9b9a2a1c` (VftManager address)
  - **value:** Amount to transfer (TVARA uses 12 decimals, so `1 TVARA = 1_000_000_000_000`)

### 2. Request Bridging via VftManager

![Request TVARA Bridging](./img/vara-request-bridging.png)

- Open the [VftManager program](https://idea.gear-tech.io/programs/0xa1497efdb24b1f08a5801b1c59610c389a5341b4db7367a7ec70fa6f9b9a2a1c?node=wss%3A%2F%2Ftestnet-archive.vara.network)
- Call the `RequestBridging` function:
  - **vara_token_id:** Address of the token contract (e.g., `0x47cd3c611f9412f936dc60430b574b048cd211bdfac8259e2ad5af735b6059b4`)
  - **amount:** Amount to bridge (must be ≤ approved value)
  - **receiver:** Ethereum recipient address (hex)

After successful execution of both the **approve** and **RequestBridging** steps,  
the VftManager program emits a `BridgingRequested` event containing a `nonce` and `block` number.

**How to find the event:**
- Go to the [VftManager program](https://idea.gear-tech.io/programs/0xa1497efdb24b1f08a5801b1c59610c389a5341b4db7367a7ec70fa6f9b9a2a1c?node=wss%3A%2F%2Ftestnet-archive.vara.network)
- Switch to the **Events** tab to locate the relevant `BridgingRequested` event and copy the `nonce` and `block` values.


### 2.5. Relay Proof to Ethereum

Run the relayer Docker container with the `nonce` and `block` values from your `BridgingRequested` event:

```sh
docker run --rm ghcr.io/gear-tech/bridge-relayer:latest gear-eth-manual \
  --gear-domain wss://testnet-archive.vara.network \
  --gear-port 443 \
  --ethereum-endpoint wss://hoodi-reth-rpc.gear-tech.io/ws \
  --mq-address 0x91ED0D3519aCE35d0591989e28735Cb1f4791924 \
  --message-nonce <MESSAGE_NONCE> \
  --message-block <MESSAGE_BLOCK> \
  --eth-fee-payer <PRIVATE_KEY>
```
- Replace `<MESSAGE_NONCE>` and `<MESSAGE_BLOCK>` with your actual event data.
- Replace `<PRIVATE_KEY>` with the Ethereum fee-payer's private key.

:::note
Finalization and minting on Ethereum are **not instant**.  
After relaying, the message will be processed and the wrapped tokens (e.g., WTVARA) will appear in the recipient's balance after confirmation.

**To check the result,** open the corresponding wrapped token contract (e.g., WTVARA) in Etherscan, go to the "Read Contract" tab, and call `balanceOf` with the recipient's address.
:::

![See the result of TVARA Bridging](./img/vara-eth-res.png)

